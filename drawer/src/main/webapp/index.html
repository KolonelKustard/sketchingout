<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Flash Drawing Tool Thingy</title>

<style type="text/css">
<!--
	html {
		height: 100%;
		margin: 0;
		padding: 0;
	}

	body {
		height: 100%;
		margin: 0;
		padding: 0;
	}
	
	table {
		width: 100%;
		height: 100%;
		margin: 0;
		padding: 0;
	}
	
	tr, td {
		margin: 0;
		padding: 0;
	}
	
	form {
		margin: 0;
		padding: 0.5em 0 0 0.5em;
		display: inline;
	}
	
	iframe {
		float: right;
		margin: 0;
		padding: 0;
		border: none;
		width: 10em;
		height: 1em;
	}
-->
</style>

<script type="text/javascript" src="JavaScriptFlashGateway.js"></script>
<script type="text/javascript" src="flashmediator.js"></script>
<script type="text/javascript">
	var uid = new Date().getTime();
	var flashProxy = new FlashProxy(uid, "JavaScriptFlashGateway.swf");
	
	var drawingUpload;

	window.onload = function() {
		flashProxy.call('setWidth', document.myForm.width.value);
		flashProxy.call('setHeight', document.myForm.height.value);
		
		drawingUpload = new FlashMediator(document.uploadForm, flashProxy, "loadMonkey");
	}
</script>
</head>
<body>
<table>
<tr>
	<td style="height: 100%;">
	<script type="text/javascript">
		var tag = new FlashTag("drawer.swf", "100%", "100%");
		tag.setFlashvars("lcId=" + uid);
		tag.write(document);
	</script>
	</td>
</tr>
<tr>
	<td>
		<iframe name="spunk"></iframe>
		
		<form name="myForm" action="#">
			<label for="width">Width:</label>
			<input type="text" name="width" id="width" value="500" size="5" onkeyup="flashProxy.call('setWidth', this.value);" />
			<label for="height">Height:</label>
			<input type="text" name="height" id="height" value="300" size="5" onkeyup="flashProxy.call('setHeight', this.value);" />
			<a href="#" onmousedown="flashProxy.call('undoStart');" onmouseup="flashProxy.call('undoStop');">Undo</a>
			<a href="#" onclick="if (window.confirm('Sure?')) flashProxy.call('clear');">Clear</a>
		</form>

		<form name="uploadForm" action="middleman" method="post" enctype="multipart/form-data" target="spunk">
			<input type="hidden" name="MNNNnnnnggggghhhhhh" value="" />
			<input type="file" name="file" />
			<input type="submit" name="submit" value="Submit" />
		</form>
	</td>
</tr>
</table>
</body>
</html>